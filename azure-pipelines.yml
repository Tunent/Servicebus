trigger:
- main

pool:
  vmImage: 'ubuntu-latest'
steps:
- task: DotNetCoreCLI@2
  inputs:
    command: 'build'
    projects: '**/*.csproj'

- task: CopyFiles@2
  inputs:
    sourceFolder: '$(Build.SourcesDirectory)'
    contents: '**/$(BuildConfiguration)/**/?(*.exe|*.dll|*.pdb)'
    targetFolder: '$(Build.ArtifactStagingDirectory)'
- task: PublishBuildArtifacts@1
  inputs:
    pathToPublish: '$(Build.ArtifactStagingDirectory)'
    artifactName: drop
    
# steps:
# - script: |
#     dotnet restore
#     dotnet build --configuration Release
# - task: DotNetCoreCLI@2
#   inputs:
#     command: publish
#     arguments: '--configuration Release --output publish_output'
#     projects: '*.csproj'
#     publishWebProjects: false
#     modifyOutputPath: false
#     zipAfterPublish: false
# - task: ArchiveFiles@2
#   displayName: "Archive files"
#   inputs:
#     rootFolderOrFile: "$(System.DefaultWorkingDirectory)/publish_output"
#     includeRootFolder: false
#     archiveFile: "$(System.DefaultWorkingDirectory)/build$(Build.BuildId).zip"
# - task: PublishBuildArtifacts@1
#   inputs:
#     PathtoPublish: '$(System.DefaultWorkingDirectory)/build$(Build.BuildId).zip'
#     artifactName: 'drop'

